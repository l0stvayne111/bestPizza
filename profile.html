<!doctype html>
<html lang="en">
<head>



    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=a4024b6f-f4e1-4d48-b5a9-11c242bbe867"
            type="text/javascript"></script>
    <script src="placemark.js" type="text/javascript"></script>


    <!-- UIkit CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.6.19/dist/css/uikit.min.css"/>


    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/media.css">


    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css" rel="stylesheet"/>


    <title>Document</title>
</head>
<body>

<div id="offcanvas-menu" uk-offcanvas="overlay: true">
    <div class="uk-offcanvas-bar uk-flex uk-flex-column">
        <button class="uk-offcanvas-close text-white" type="button" uk-close></button>
        <ul class="uk-nav uk-nav-primary uk-nav-center uk-margin-auto-vertical">
            <li class=""><a href="#our-menu" class="text-white">Меню</a></li>
            <li class=""><a href="#about-us" class="text-white">О Нас</a></li>
            <li class=""><a href="#time-delivery" class="text-white">Доставка</a></li>
            <li class=""><a href="#our-contacts" class="text-white">Контакты</a></li>
            <li class="uk-nav-divider"></li>
            <li>
                <form action="" class="exit-profile">
                    <button class="btn rounded-pill">Выход</button>
                </form>
            </li>
        </ul>

    </div>
</div>


<nav class="mobile-nav">
    <div class="container">
        <div class="nav-mobile-box">
            <button class="btn" uk-toggle="target: #offcanvas-menu">
                <i class="fas fa-bars"></i>
            </button>
            <div class="logo-box">
                <h1><span>best</span>pizza</h1>
            </div>
        </div>
    </div>
</nav>

<nav class="main-nav">
    <div class="container">
        <div class="nav-box">
            <div class="logo-box">
                <h1><span>best</span>pizza</h1>
            </div>
            <ul class="nav navigation nav-pill">
                <li class="nav-item">
                    <a href="#our-menu" class="nav-link rounded-pill">Меню</a>
                </li>
                <li class="nav-item">
                    <a href="#about-us" class="nav-link rounded-pill">О Нас</a>
                </li>
                <li class="nav-item">
                    <a href="#time-delivery" class="nav-link rounded-pill">Доставка</a>
                </li>
                <li class="nav-item">
                    <a href="#our-contacts" class="nav-link rounded-pill">Контакты</a>
                </li>
            </ul>
            <form action="" class="exit-profile">
                <button class="btn rounded-pill">Выход</button>
            </form>
        </div>
    </div>
</nav>

<div class="wrapper-app">
    <header class="profile-header">
        <div class="container">
            <div class="row">
                <h2>Здравствуйте, Олег</h2>
            </div>
        </div>
    </header>


    <section id="profile" class="section bg-white">
        <img src="img/home-4-div.png" class="substrate top" alt="">
        <div class="container">
            <div class="row justify-content-between">
                <div class="col-12 mb-5">
                    <div class="title-section white" data-top="Ваша работа" data-bottom="Счастливого дня ;)">
                        <h2>
                            Выберите заказ
                        </h2>
                    </div>
                </div>
                <div class="col-12">
                    <h3 class="title-section-profile">Активные заказы</h3>
                    <div class="order-box-items">
                        <div class="row w-100">
                            <div class="col-lg-4 col-md-6">
                                <div class="order-box-item bg-success active rounded shadow">
                                    <p class="number-order">Номер заказа: #12345</p>
                                    <p class="name-order">Заказ: Домашняя</p>
                                    <p class="name-client">Клиент: Максимов Сергей</p>
                                    <p class="phone-client">Телефон: 7 999 999 99 99</p>
                                    <p class="address">Адрес: spanг. Брянск ул. Союзная 4</p>
                                    <form action="">
                                        <button type="submit" class="btn btn-danger">Выполнен</button>
                                        <input type="hidden" value="г. Брянск ул. Союзная 4">
                                        <button type="button" class="btn btn-danger"
                                                onclick="geoFindMe(this.previousElementSibling.value);">Показать на
                                            карте
                                        </button>
                                    </form>
                                </div>
                            </div>

                        </div>
                    </div>


                    <div class="profile-map-box rounded">
                        <h3 class="title-section-profile">Карта доставки</h3>

                        <div id="map"></div>
                    </div>

                </div>
                <div class="col-12">
                    <h3 class="title-section-profile">Доступные заказы</h3>
                    <div class="row w-100 order-box-items no-active-items justify-content-between flex-nowrap">
                        <div class="col-lg-4 col-md-6">
                            <div class="order-box-item no-active rounded shadow">
                                <p class="number-order">Номер заказа: #12345</p>
                                <p class="name-order">Заказ: Домашняя</p>
                                <p class="name-client">Клиент: Максимов Сергей</p>
                                <p class="phone-client">Телефон: 7 999 999 99 99</p>
                                <p class="address">Адрес: Брянск, пр-кт Московский 33</p>
                                <form action="" class="add-order">
                                    <button class="btn btn-danger">Добавить в активные</button>
                                    <input type="hidden" class="coordX">
                                    <input type="hidden" class="coordY">
                                </form>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="order-box-item no-active rounded shadow">
                                <p class="number-order">Номер заказа: #12345</p>
                                <p class="name-order">Заказ: Домашняя</p>
                                <p class="name-client">Клиент: Максимов Сергей</p>
                                <p class="phone-client">Телефон: 7 999 999 99 99</p>
                                <p class="address">Адрес: Брянск, ул. Киевская</p>
                                <form action="" class="add-order">
                                    <button class="btn btn-danger">Добавить в активные</button>
                                    <input type="hidden" class="coordX">
                                    <input type="hidden" class="coordY">
                                </form>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="order-box-item no-active rounded shadow">
                                <p class="number-order">Номер заказа: #12345</p>
                                <p class="name-order">Заказ: Домашняя</p>
                                <p class="name-client">Клиент: Максимов Сергей</p>
                                <p class="phone-client">Телефон: 7 999 999 99 99</p>
                                <p class="address">Адрес: г. Брянск ул. Союзная 4</p>
                                <form action="" class="add-order">
                                    <button class="btn btn-danger">Добавить в активные</button>
                                    <input type="hidden" class="coordX">
                                    <input type="hidden" class="coordY">
                                </form>
                            </div>
                        </div>
                        <div class="col-lg-4 col-md-6">
                            <div class="order-box-item no-active rounded shadow">
                                <p class="number-order">Номер заказа: #12345</p>
                                <p class="name-order">Заказ: Домашняя</p>
                                <p class="name-client">Клиент: Максимов Сергей</p>
                                <p class="phone-client">Телефон: 7 999 999 99 99</p>
                                <p class="address">Адрес: г. Брянск ул. Союзная 4</p>
                                <form action="" class="add-order">
                                    <button class="btn btn-danger">Добавить в активные</button>
                                    <input type="hidden" class="coordX">
                                    <input type="hidden" class="coordY">
                                </form>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="col-12 mt-5">
                    <div class="staff-table">
                        <h2 class="title-section-profile">Список курьеров</h2>
                        <div class="add-new-employee">

                            <div class="accordion-item">
                                <h2 class="accordion-header" id="heading">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                            data-bs-target="#collapse" aria-expanded="false" aria-controls="collapse">
                                        Добавить нового курьера
                                    </button>
                                </h2>
                                <div id="collapse" class="accordion-collapse collapse" aria-labelledby="heading"
                                     data-bs-parent="#accordionExample" style="">
                                    <div class="accordion-body">
                                        <form action="" method="post" class="was-validated">
                                            <div class="row mb-4">
                                                <div class="form-group col-md-6 mb-3">
                                                    <label for="">Имя</label>
                                                    <input type="text" class="form-control is-invalid" id=""
                                                           required="">
                                                    <div class="invalid-feedback">
                                                        Введите имя.
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-6 mb-3">
                                                    <label for="">Логин</label>
                                                    <input type="text" class="form-control is-invalid" id=""
                                                           required="">
                                                    <div class="invalid-feedback">
                                                        Введите логин.
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label for="">Пароль</label>
                                                    <input type="text" class="form-control is-invalid" required="">
                                                    <div class="invalid-feedback">
                                                        Введите пароль.
                                                    </div>
                                                </div>
                                                <div class="form-group col-md-6">
                                                    <label for="">Телефон</label>
                                                    <input type="text" class="form-control is-invalid" required>
                                                    <div class="invalid-feedback">
                                                        Введите номер телефона.
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="mb-2">

                                                <button class="btn btn-primary" type="submit">Отправить
                                                </button>
                                                <button class="btn btn-danger" type="reset">Очистить</button>
                                            </div>
                                            <input type="hidden" name="link" value="profile">
                                        </form>
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div class="grid-table-staff">


                            <div class="tr-line">
                                <div class="tr th">
                                    Имя
                                </div>
                                <div class="tr th">
                                    Логин
                                </div>
                                <div class="tr th">
                                    Пароль
                                </div>
                                <div class="tr th">
                                    Телефон
                                </div>
                                <div class="tr th center">
                                    Редактировать
                                </div>
                                <div class="tr th center-tr">
                                    Удалить
                                </div>
                                <div class="tr th center-tr">

                                </div>
                            </div>

                            <div class="tr-line">
                                <div class="tr tb">
                                    Олег Зеленский
                                </div>
                                <div class="tr tb">
                                    Oleg228
                                </div>
                                <div class="tr tb">
                                    12005535
                                </div>
                                <div class="tr tb">
                                    7 999 999 99 99
                                </div>
                                <div class="tr tb center-tr">
                                    <form action="" class="edit-employee-trigger">
                                        <input type="hidden" value="1">
                                        <input type="hidden" value="Олег Зелегский">
                                        <input type="hidden" value="Oleg228">
                                        <input type="hidden" value="12005535">
                                        <input type="hidden" value="7 999 999 99 99">
                                        <button type="submit" class="btn py-0" uk-toggle="target: #modal-edit-employee"
                                                aria-expanded="false">
                                            <i class="fas fa-pen"></i></button>
                                    </form>
                                </div>
                                <div class="tr tb center-tr">
                                    <form action="">
                                        <button type="submit" class="btn py-0">
                                            <i class="fas fa-trash-alt"></i></button>
                                    </form>
                                </div>
                                <div class="tr tb center-tr">
                                    <a href="#map" data-x-coord="55.734876" data-y-coord="37.59308" class="btn py-0" onclick="init(this.dataset.xCoord, this.dataset.yCoord, '')">
                                        <i class="fas fa-map-marker-alt"></i></a>
                                </div>
                            </div>





                            <div class="tr-line">
                                <div class="tr tb">
                                    Олег Зеленский
                                </div>
                                <div class="tr tb">
                                    Oleg228
                                </div>
                                <div class="tr tb">
                                    12005535
                                </div>
                                <div class="tr tb">
                                    7 999 999 99 99
                                </div>
                                <div class="tr tb center-tr">
                                    <form action="" class="edit-employee-trigger">
                                        <input type="hidden" value="2">
                                        <input type="hidden" value="Олег Зелегский">
                                        <input type="hidden" value="Oleg228">
                                        <input type="hidden" value="12005535">
                                        <input type="hidden" value="7 999 999 99 99">
                                        <button type="submit" class="btn py-0" uk-toggle="target: #modal-edit-employee"
                                                aria-expanded="false">
                                            <i class="fas fa-pen"></i></button>
                                    </form>
                                </div>
                                <div class="tr tb center-tr">
                                    <form action="">
                                        <button type="submit" class="btn py-0">
                                            <i class="fas fa-trash-alt"></i></button>
                                    </form>
                                </div>
                                <div class="tr tb center-tr">
                                    <a href="#map" data-x-coord="55.734876" data-y-coord="37.59308" class="btn py-0" onclick="init(this.dataset.xCoord, this.dataset.yCoord, '')">
                                        <i class="fas fa-map-marker-alt"></i></a>
                                </div>
                            </div>


                            <div class="tr-line">
                                <div class="tr tb">
                                    Олег Зеленский Зеленский Зеленский
                                </div>
                                <div class="tr tb">
                                    Oleg228
                                </div>
                                <div class="tr tb">
                                    12005535
                                </div>
                                <div class="tr tb">
                                    7 999 999 99 99
                                </div>
                                <div class="tr tb center-tr">
                                    <form action="" class="edit-employee-trigger">
                                        <input type="hidden" value="3">
                                        <input type="hidden" value="Олег Зелегский">
                                        <input type="hidden" value="Oleg228">
                                        <input type="hidden" value="12005535">
                                        <input type="hidden" value="7 999 999 99 99">
                                        <button type="submit" class="btn py-0" uk-toggle="target: #modal-edit-employee"
                                                aria-expanded="false">
                                            <i class="fas fa-pen"></i></button>
                                    </form>
                                </div>
                                <div class="tr tb center-tr">
                                    <form action="">
                                        <button type="submit" class="btn py-0">
                                            <i class="fas fa-trash-alt"></i></button>
                                    </form>
                                </div>
                                <div class="tr tb center-tr">
                                        <a href="#map" data-x-coord="55.734876" data-y-coord="37.59308" class="btn py-0" onclick="init(this.dataset.xCoord, this.dataset.yCoord, '')">
                                            <i class="fas fa-map-marker-alt"></i></a>
                                </div>
                            </div>
                        </div>


                    </div>
                </div>
            </div>
        </div>
        <img src="img/home-4-div.png" class="substrate bottom" alt="">
    </section>


    <section class="banner-profile"></section>


</div>


<div id="modal-edit-employee" class="uk-flex-top uk-modal" uk-modal="">
    <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">

        <button class="uk-modal-close-default uk-icon uk-close" type="button" uk-close="">
            <svg width="14" height="14" viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg">
                <line fill="none" stroke="#000" stroke-width="1.1" x1="1" y1="1" x2="13" y2="13"></line>
                <line fill="none" stroke="#000" stroke-width="1.1" x1="13" y1="1" x2="1" y2="13"></line>
            </svg>
        </button>
        <h2 class="uk-modal-title title-section-profile">Редактировать профиля курьера</h2>
        <form action="" method="post" class="mt-5 mb-4 edit-employee-users-form">
            <div class="row mb-3">
                <div class="form-group col-md-6">
                    <label for="inputName">Имя</label>
                    <input type="text" class="form-control rounded-pill" id="inputName" value="">
                </div>
                <div class="form-group col-md-6">
                    <label for="inputLogin">Логин</label>
                    <input type="text" class="form-control rounded-pill" id="inputLogin" value="">
                </div>
            </div>
            <div class="row mb-3">
                <div class="form-group col-md-6">
                    <label for="inputPass">Пароль</label>
                    <input type="text" class="form-control rounded-pill" id="inputPass" value="">
                </div>
                <div class="form-group col-md-6">
                    <label for="inputTel">Телефон</label>
                    <input type="text" class="form-control rounded-pill" id="inputTel" value="">
                </div>
            </div>
            <input type="hidden" id="inputId">
            <button type="submit" name="editProfile" class="btn rounded-pill">Отправить</button>
            <button class="btn mx-3 uk-modal-close rounded-pill" type="button">Отмена</button>
        </form>

    </div>
</div>


<script type="text/javascript" charset="utf-8">

    function loadGeoFindMe(){
        function coords(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;
            let x = document.querySelectorAll('.coordX');
            let y = document.querySelectorAll('.coordY');
            if(x.length !== 0){
                x.forEach((i)=>{
                    i.setAttribute('value', latitude);
                })
            }
            if(y.length !== 0){
                y.forEach((i)=>{
                    i.setAttribute('value', longitude);
                })
            }


        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(coords);
        }
    }
    loadGeoFindMe();
</script>

<script>
    function editDB() {
        let editEmployeeTrigger = document.querySelectorAll('.edit-employee-trigger');
        editEmployeeTrigger.forEach(i => i.addEventListener('submit', (evt) => {
            evt.preventDefault();
            importDataUser({
                id_user: i.children[0].value,
                name: i.children[1].value,
                login: i.children[2].value,
                pass: i.children[3].value,
                tel: i.children[4].value

            });

        }))
    }


    function importDataUser({
                                name = null,
                                pass = null,
                                login = null,
                                tel = null,
                                id_user
                            }) {
        let formEditUser = document.querySelector('.edit-employee-users-form');

        let inputName = formEditUser.querySelector('#inputName').setAttribute('value', name);
        let inputPass = formEditUser.querySelector('#inputPass').setAttribute('value', pass);

        let inputTel = formEditUser.querySelector('#inputTel').setAttribute('value', tel);
        let inputLogin = formEditUser.querySelector('#inputLogin').setAttribute('value', login);

        let inputIdUser = formEditUser.querySelector('#inputId').setAttribute('value', id_user);

    }

    editDB();
</script>



<script type="text/javascript" charset="utf-8">
    function geoFindMe(address) {

        function success(position) {
            const latitude = position.coords.latitude;
            const longitude = position.coords.longitude;

            init(latitude, longitude, address);

        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(success);
        }
    }


</script>




<script>
    function checkActiveOrder() {
        let activeOrder = document.querySelectorAll('.order-box-item.active');
        let addOrder = document.querySelectorAll('.add-order');
        if (addOrder.length !== 0) {
            addOrder.forEach(i => i.addEventListener('submit', (evt) => {
                (activeOrder.length > 0) ? evt.preventDefault() : '';
            }))
        }
    }

    checkActiveOrder();

</script>
<script>
    let bufScroll = 0;
    window.addEventListener('scroll', () => {
        let nav = document.querySelector('.main-nav');
        (window.scrollY > 20) ? nav.classList.add('bg-white') : nav.classList.remove('bg-white');
    })
</script>


<script type="text/javascript">
    function init(_x, _y, _address) {
        if (document.getElementById('map').firstElementChild != null) {
            document.getElementById('map').firstElementChild.remove();
        }

        let mapBox = document.querySelector('.profile-map-box');
        mapBox.style.display = 'block';

        var multiRoute = new ymaps.multiRouter.MultiRoute({
            // Описание опорных точек мультимаршрута.
            referencePoints: [
                [_x, _y],
                String(_address)
            ],
            // Параметры маршрутизации.
            params: {
                // Ограничение на максимальное количество маршрутов, возвращаемое маршрутизатором.
                routingMode: 'pedestrian',
                results: 2
            }
        }, {
            // Автоматически устанавливать границы карты так, чтобы маршрут был виден целиком.
            boundsAutoApply: true
        });

        // Создаем кнопки для управления мультимаршрутом.
        var trafficButton = new ymaps.control.Button({
            data: {content: "Учитывать пробки"},
            options: {selectOnClick: true}
        });

        // Объявляем обработчики для кнопок.
        trafficButton.events.add('select', function () {
            /**
             * Задаем параметры маршрутизации для модели мультимаршрута.
             * @see https://api.yandex.ru/maps/doc/jsapi/2.1/ref/reference/multiRouter.MultiRouteModel.xml#setParams
             */
            multiRoute.model.setParams({avoidTrafficJams: true}, true);
        });

        trafficButton.events.add('deselect', function () {
            multiRoute.model.setParams({avoidTrafficJams: false}, true);
        });

        // Создаем карту с добавленными на нее кнопками.
        var myMap = new ymaps.Map('map', {
            center: [_x, _y],
            zoom: 7,
            controls: [trafficButton]
        }, {
            buttonMaxWidth: 300
        });

        // Добавляем мультимаршрут на карту.
        myMap.geoObjects.add(multiRoute);
    }


</script>

<!-- UIkit JS -->
<script src="https://cdn.jsdelivr.net/npm/uikit@3.6.19/dist/js/uikit.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/uikit@3.6.19/dist/js/uikit-icons.min.js"></script>

<!-- Bootstrap 5 -->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
        integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
        integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
        crossorigin="anonymous"></script>
</body>
</html>